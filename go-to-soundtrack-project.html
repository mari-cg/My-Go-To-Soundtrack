<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Go-To Soundtrack</title>
    <link href="https://fonts.cdnfonts.com/css/clear-sans" rel="stylesheet">
    <script src="https://kit.fontawesome.com/2d07df85b5.js" crossorigin="anonymous"></script>       
    <style>
        body {
            background-color: #ebdaa8;
            min-height: 100%;
            max-height: 150%;
            font-family: 'Clear Sans', sans-serif;
            font-family: 'Clear Sans Thin', sans-serif;
            font-family: 'Clear Sans Light', sans-serif;
            font-family: 'Clear Sans Medium', sans-serif;
            border-top: #7e2233 solid 20px;
            /*border-bottom: #7e2233 solid 10px;*/
            margin: 0 auto;
        }

        header {
            color: #7e2233;
            font-size: 50px;
            font-weight: bold;
            text-shadow: 2px 2px 0px rgba(206, 169, 137, 0.8);
            display: block;
            text-align: center;
            margin-top: 50px;

        }

        main {
            margin: 50px;
        }

        .red-line {
            background-color: #7e2233;
            color: #7e2233;
            width: 100%;
        }

       .banner {
        color: #7e2233;
            display: flex;
            align-items: center;
            max-width: 500px;
            position: relative;
            background-image: url('https://s3.amazonaws.com/shecodesio-production/uploads/files/000/176/398/original/banner.png?1764970334');
            background-size: 120%;   
            background-repeat: no-repeat;
            background-position: center;
            /*color: #ebdaa8;          
            font-size: 20px;
            font-weight: bold;
            text-align: center;*/
            height: 120px;
            padding: 10px 50px;  
            margin: 20px auto;
            justify-content: center;
        }

        .banner-text {
            color: #ebdaa8;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
        }
        .songs {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            margin: 40px auto;
        }
        img {
            border-radius: 10px;
            vertical-align: middle;
        }

        .album-cover {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        #duration-slider {
            appearance: none;
            -webkit-appearance: none;
            width: 50%;
            height: 6px;
            background: linear-gradient(to right, #6f7945 0%, #6f7945 0%, #ebdaa8 0%, #ebdaa8 100%);
            border-radius: 4px;
            border: 2px solid #6f7945;
            cursor: pointer;
            margin: 40px 0 ;
        }
        #duration-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            background: #6f7945;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            /*border: 2px solid #ebdaa8;*/
        }
        .previous-song {
            max-width: 150px;
            max-height: 150px;

        }

        .current-song {
            max-width: 250px;
            max-height: 250px;
        }

        .next-song {
            max-width: 150px;
            max-height: 150px;
        }
        .controls {
            display: flex;
            justify-content: space-evenly;
            align-items: center;

        }
        .controls div{
            background: none;
            border: none;
            color: #6f7945;
            cursor: pointer;
            font-weight: bold;
            font-size: 40px;
        }
       
        .info {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        .playing {
            color: #6f7945;
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
            font-size: 18px;
            font-weight: bold;
        }
        .story {
            color: #7e2233;
            max-width: 600px;
            margin: 30px auto;
            text-align: center;
            font-style: italic;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <header>My Go-To Soundtrack</header>
    <div class="banner"> <span class="banner-text" >Listen to some of my favorite songs!</span> </div>
    <main>
        <div class="songs">
            <span class="album-cover">
                <img class="previous-song" id="previous-song" src="https://s3.amazonaws.com/shecodesio-production/uploads/files/000/176/378/original/EAS_5sos_album_cover.jpg?1764892625" ></img>
                <img id="current-song" src="https://s3.amazonaws.com/shecodesio-production/uploads/files/000/176/381/original/Raye_M21CS_album_cover.jpg?1764892640"></img>
                <img class="next-song" id="next-song" src="https://s3.amazonaws.com/shecodesio-production/uploads/files/000/176/379/original/Jade_TSB_album_cover.jpg?1764892630"></img>

            </span>
        </div>
        <div class="info">
            <div id="song-name">Flip A Switch - Live at the Royal Albert Hall</div>
            <div id="artist-name">RAYE</div>
        </div>
        <div class="playing">
            <input type="range" min="0" max="100" value="0" id="duration-slider" class="duration-slider">
            <span class="duration-time">02:19</span>

        </div>
        <div class="controls">
            <div><p class="prev">﹤</p></div>
            <div><p class="play" id="ctrlIcon"><i id="ctrlIconIcon" class="fa-solid fa-play"></i></p></div>
            <div><p class="next">﹥</p></div>
        </div>
        <audio id="audio"></audio>
        <div id="story" class="story">"Backed-up by an amazing orchestra with an amazing voice and confident lyrics, is this an amazing song to sing to yourself swinging around the room"</div>
    </main>
    <footer></footer>
    <h1 class="red-line"></h1>


    <script>
        let artist = document.getElementById("artist-name");
        let title =  document.getElementById("song-name");
        let trackDuration = document.querySelector(".duration-time");
        let previous = document.querySelector(".prev");
        let play = document.getElementById("ctrlIcon");
        let next = document.querySelector(".next");
        let previousSongImg = document.getElementById("previous-song");
        let currentSongImg = document.getElementById("current-song");
        let nextSongImg = document.getElementById("next-song");
        let story = document.getElementById("story");
        let trackList = [
             {
                title: "I'm Scared I'll Never Sleep Again",
                artist: "5 Seconds Of Summer",
                cover: "https://s3.amazonaws.com/shecodesio-production/uploads/files/000/176/378/original/EAS_5sos_album_cover.jpg?1764892625",
                file: "audio/5sos-isinsa.mp3",
                story: "If you look up the definition of the word 'yearning' you get this song (and overal just Luke Hemmings) as the result. Perfect for when you're staring out of a window"
            },
            { 
                title: "Flip A Switch - Live at the Royal Albert Hall",
                artist: "RAYE",
                cover: "https://s3.amazonaws.com/shecodesio-production/uploads/files/000/176/381/original/Raye_M21CS_album_cover.jpg?1764892640",
                file: "audio/raye-fas.mp3",
                story: "Backed-up by an amazing orchestra with an amazing voice and confident lyrics, is this an amazing song to sing to yourself swinging around the room",
            },
            { 
                title: "Unconditional",
                artist: "JADE",
                cover: "https://s3.amazonaws.com/shecodesio-production/uploads/files/000/176/379/original/Jade_TSB_album_cover.jpg?1764892630",
                file: "audio/jade-unconditional.mp3",
                story: "Exploring 'pop' in such a way on just her debut album, with loving but kinda sad lyrics, you just have to give Jade her flowers for this masterpiece",
            },
            { 
                title: "Easy Lover",
                artist: "Philip Bailey, Phil Collins",
                cover: "https://s3.amazonaws.com/shecodesio-production/uploads/files/000/176/380/original/Philip_bailey_CW_album_cover.jpg?1764892635",
                file: "audio/philip-bailey-easy-lover.mp3",
                story: "A classic not-so-fun-lyrics but such a vibe where you're shoulders just start to dance on their own",
            },
            { 
                title: "Oysters In My Pocket",
                artist: "Royel Otis",
                cover: "https://s3.amazonaws.com/shecodesio-production/uploads/files/000/176/382/original/Royel_Otis_OIMP_album_cover.jpg?1764892645",
                file: "audio/royel-otis-oimp.mp3",
                story: "A perfect chill but not to chill song, fits every mood",
            }
        ]
        let timer;
        let autoplay = 0;
        let indexTrack = 0;
        let songIsPlaying = false;
        let track = document.getElementById("audio");
        const playIcon = document.getElementById("ctrlIconIcon");
        const slider = document.getElementById("duration-slider");
        

        function loadTrack(indexTrack) {
            clearInterval(timer);
            resetSlider();
            track.src = trackList[indexTrack].file;
            currentSongImg.src = trackList[indexTrack].cover;
            title.innerHTML = trackList[indexTrack].title;
            artist.innerHTML = trackList[indexTrack].artist;
            story.innerHTML = trackList[indexTrack].story;

            const prevIndex = (indexTrack - 1 + trackList.length) % trackList.length;
            previousSongImg.src = trackList[prevIndex].cover;

            const nextIndex = (indexTrack + 1) % trackList.length;
            nextSongImg.src = trackList[nextIndex].cover;

            track.load();
            timer = setInterval(updateSlider, 1000);
        }
        loadTrack(indexTrack);

        function justPlay() {
            if (songIsPlaying == false) {
                playSong();
            } else {
                pauseSong();
            }
        }

        function playSong() {
            track.play();
            songIsPlaying = true;
            playIcon.classList.remove("fa-play");
            playIcon.classList.add("fa-pause");
        }
        
        function pauseSong() {
            track.pause();
            songIsPlaying = false;
            playIcon.classList.remove("fa-pause");
            playIcon.classList.add("fa-play")
        }
        function nextSong() {
            if (indexTrack < trackList.length - 1) {
                indexTrack++;
                loadTrack(indexTrack);
                playSong();
            } else {
                indexTrack = 0;
                loadTrack(indexTrack);
                playSong();
            }
        }

        function prevSong() {
            if (indexTrack > 0) {
                indexTrack--;
                loadTrack(indexTrack);
                playSong();
            } else {
                indexTrack = trackList.length - 1;
                loadTrack(indexTrack);
                playSong();
            }
        }

        function changeDuration() {
            let sliderPosition = track.duration * (slider.value / 100);
            track.currentTime = sliderPosition;
        }

        function resetSlider() {
            slider.value = 0;
        }

        function updateSlider() {
            let position = 0;

            if (!isNaN(track.duration)) {
                position = track.currentTime * (100 / track.duration);
                slider.value = position;
            }

            if (track.ended) {
                play.innerHTML = '<i class="fa-solid fa-play"></i>';
                if (autoplay == 1 && indexTrack < trackList.length - 1) {
                    indexTrack++;
                    loadTrack(indexTrack);
                    playSong();
                }
            }
        }

        function updateSliderBackground() {
            const value = (slider.value - slider.min) / (slider.max - slider.min) *100;
            slider.style.background = `linear-gradient(to right, #6f7945 ${value}%, #ebdaa8 ${value}%)`;
        }

        function songTimeUpdate() {
            if (track.duration) {
                let remaining =  track.duration - track.currentTime;
                let mins = Math.floor(remaining / 60);
                let secs = Math.floor(remaining % 60);
                if (secs < 10) secs = "0" + secs;
                if (mins < 10) mins = "0" + mins;
                trackDuration.innerHTML = mins + ":" + secs;
            } else {
                trackDuration.innerHTML = "00:00"
            }
        }
        track.addEventListener("timeupdate", () => {
            const position = track.currentTime / track.duration * 100;
            slider.value = position;
            updateSliderBackground();
        });
        slider.addEventListener("input", updateSliderBackground);

        play.addEventListener("click", justPlay);
        next.addEventListener("click", nextSong);
        previous.addEventListener("click", prevSong);
        slider.addEventListener("change", changeDuration);
        track.addEventListener("timeupdate", songTimeUpdate);
    </script>
</body>
</html>